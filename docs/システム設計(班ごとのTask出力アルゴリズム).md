## 問題点: 中間 Item が Task に混ざり「両方作るの？」という誤解が発生する

結論: 紙に書いたアイデアは、結果として失敗だったため、
解決策として DB のスキーマ変更 (Item.is_department_output の追加) を検討した。

## 失敗例 1: いも班に責務を持たせる

いも班の責務として

-   じゃがいも (乱切り) 550 g
-   じゃがいも (マッシュ) 550 g

を持たせても、いも班の Task に

-   じゃがいも (乱切り) 550 g x 5
-   じゃがいも (マッシュ) 550 g x 5

が両方表示されてしまい「両方作るの？」という誤解が生まれる。

## 失敗例 2: 梱包班に責務を持たせる

梱包班の責務として、

-   ポテトサラダベース 800 g
-   じゃがいも (マッシュ) 550 g

を持たせても、梱包班の Task に

-   ポテトサラダベース 800 g x 5
-   じゃがいも (マッシュ) 550 g x 5

が両方表示されてしまい、同様に「両方作るの？」という誤解が生まれる。

## 共通点: 出力境界が曖昧で、Task が「Item リスト」化する

上記の共通点は、
「その班の画面に出すべき Item（= 出力）」と
「内部計算のための中間 Item」が区別できていないこと。

ロジックを複雑にすれば解決は可能だが、直感的に違和感が強く、システムにバグを誘発するのでは。

## 抜本策: Item.is_department_output で「出力する Item」を明示する

抜本的な解決法として
DB の Item に is_department_output を追加し、

-   true: 班の Task として画面に出してよい Item（最終 Item / 班の成果物）
-   false: 内部計算のための中間 Item

を区別する。

DB にカラムを追加することで、「if 文だらけの出力フィルタ」を避け、
ロジックが複雑化する事態を回避する。
