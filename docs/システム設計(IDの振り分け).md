# ID 設計の検討

## 結論

他の現場で有効だった「注文書 ID × 箱 ID の 1 対 1 紐づけ」を、フルックス様の現場にそのまま適用する案は不採用にしました。

理由は、ケースが「固定された対象」ではなく、その場で入れ替わる運用に近く、1 対 1 で強く管理する必然性が薄いと考えたためです。

## きっかけ（他現場で見た仕組み）

近くの倉庫で、フルキャストとしてピッキング作業をした経験があります。
そのときの運用から、次のような仕組みだと推測しました。

0.  前提として、「注文書」と「箱」と「箱に入れる商品」のセットを別の従業員が作り、私が手に取る
1.  「注文書」と「箱」の両方をスキャンし、注文 ID と箱 ID を複合キーとして登録する
2.  箱に入れる商品をすべてスキャンし、複合キーに対して「商品種類と数量」を登録する
3.  最後にもう一度「注文書」と「箱」をスキャンし、レコードの抜けや重複を確認する

スキャン手順を守れば、正しい商品を正しい数量で登録できる仕組みで、精度が高いと感じました。

## 一度採用した案

-   「ケース」と「ケースに貼るラベル」の両方に ID を振る
-   ケース ID とラベル ID を 1 対 1 で紐づける

ことで、同様に管理精度を上げられるのではないかと考え、一度は採用しました。

## 違和感と不採用の理由

ただ、フルックス様でのケース運用を思い出して整理すると、次の点で違和感が強くなりました。

-   ケースは種類があっても「この食材にはこの種類のケースを使う」程度の区別であり
    「その場で空いているケース」を持ってくる運用に近い

-   ケースは「入れ物」に過ぎず、ケースとラベルの組み合わせは状況に応じて入れ替わりやすい

この前提では、ピッキング現場の「注文書と箱」のように、1 対 1 で強く固定して管理する理由が薄く、
むしろシステムと運用が無駄に複雑になると判断しました。

## 学び

結果としてこの案は不採用にしましたが、

-   うまくいっている仕組みでも、現場が違えばそのまま適用しない
-   「現場の実態に意味のある ID だけを採用する」

という設計方針に整理できた点は、TaskBoard の設計で大きな学びでした。
